/* ====== THEME VARS ====== */
:root {
  --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --bg-secondary: rgba(255, 255, 255, 0.95);
  --text-primary: #1f2937;
  --text-secondary: #6b7280;
  --text-accent: #374151;
  --border-color: #e5e7eb;
  --shadow: rgba(0, 0, 0, 0.1);
  --shadow-hover: rgba(0, 0, 0, 0.15);
  --status-bg: #f9fafb;
  --unit-bg: #f3f4f6;
  --card-bg: rgba(255, 255, 255, 0.95);
}
[data-theme="dark"], .dark-mode {
  --bg-primary: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
  --bg-secondary: rgba(15, 23, 42, 0.95);
  --text-primary: #f8fafc;
  --text-secondary: #94a3b8;
  --text-accent: #e2e8f0;
  --border-color: #475569;
  --shadow: rgba(0, 0, 0, 0.4);
  --shadow-hover: rgba(0, 0, 0, 0.6);
  --status-bg: #1e293b;
  --unit-bg: #334155;
  --card-bg: rgba(15, 23, 42, 0.95);
}

/* ====== BASE ====== */
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;
  background:var(--bg-primary);min-height:100vh;color:var(--text-primary);
  direction:rtl;transition:all .3s ease;
}
body[dir="ltr"]{direction:ltr}
body[dir="ltr"] .header,
body[dir="ltr"] .card-header{flex-direction:row-reverse}
body[dir="ltr"] .sensor-icon{margin-left:0;margin-right:8px}

.container{max-width:1400px;margin:0 auto;padding:20px}

/* ====== HEADER ====== */
.header{
  background:var(--card-bg);backdrop-filter:blur(10px);
  border-radius:16px;padding:20px 24px;margin-bottom:30px;
  display:flex;justify-content:space-between;align-items:center;
  box-shadow:0 6px 24px var(--shadow);border:1px solid var(--border-color)
}
.header-left h1{
  font-size:2rem;background:linear-gradient(45deg,#667eea,#764ba2);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;display:flex;gap:15px;align-items:center
}
.header-left h1 i{background:linear-gradient(45deg,#667eea,#764ba2);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header-controls{display:flex;align-items:center;gap:20px}
.control-group{display:flex;gap:10px}
.control-btn{
  background:var(--card-bg);border:2px solid var(--border-color);border-radius:12px;
  padding:12px 16px;cursor:pointer;transition:.3s;color:var(--text-primary);
  font-weight:600;min-width:50px;display:flex;align-items:center;justify-content:center;
  backdrop-filter:blur(10px)
}
.control-btn:hover{transform:translateY(-2px);box-shadow:0 6px 20px var(--shadow-hover);border-color:#667eea;background:var(--bg-secondary)}
.theme-icon{font-size:1.2rem;transition:.3s}
.lang-text{font-size:.9rem;font-weight:700}
.status-indicator{
  display:flex;align-items:center;gap:10px;font-weight:600;color:var(--text-primary);
  padding:6px 12px;background:var(--card-bg);border-radius:12px;border:1px solid var(--border-color)
}
.status-dot{width:12px;height:12px;border-radius:50%;animation:pulse 2s infinite}
.status-dot.online{background:#10b981;box-shadow:0 0 10px rgba(16,185,129,.5)}
.status-dot.offline{background:#ef4444;box-shadow:0 0 10px rgba(239,68,68,.5)}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}}

/* ====== LAYOUT ====== */
.dashboard{display:flex;flex-direction:column;gap:30px}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}
.cards-grid.enhanced{grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px;margin-bottom:40px}

/* ====== CARDS ====== */
.sensor-card{
  background:var(--card-bg);backdrop-filter:blur(10px);border-radius:16px;padding:20px;
  box-shadow:0 10px 28px var(--shadow);transition:.3s;border:2px solid transparent;position:relative;overflow:hidden
}
.sensor-card::before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:var(--accent-color,#667eea);transition:.3s}
.sensor-card:hover{transform:translateY(-5px);box-shadow:0 15px 50px var(--shadow-hover)}
.sensor-card.temperature{--accent-color:#ef4444}
.sensor-card.humidity{--accent-color:#3b82f6}
.sensor-card.soil{--accent-color:#10b981}
.sensor-card.light{--accent-color:#f59e0b}
.sensor-card.water{--accent-color:#06b6d4}
.sensor-card.time{--accent-color:#8b5cf6}

.card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.card-header h3{font-size:1.05rem;color:var(--text-accent);display:flex;align-items:center;gap:8px;font-weight:600}
.sensor-icon{font-size:1.3rem;margin-left:8px;color:var(--accent-color,#667eea)}
.unit{background:var(--unit-bg);padding:4px 10px;border-radius:999px;font-size:.8rem;color:var(--text-secondary);font-weight:600;border:1px solid var(--border-color)}

.card-value{font-size:2.4rem;font-weight:700;color:var(--text-primary);margin-bottom:10px;font-family:"Segoe UI",monospace;letter-spacing:.5px}
.card-value.small{font-size:1.25rem;font-weight:600}

.card-trend{display:flex;align-items:center;gap:8px;margin-top:10px;padding:6px 10px;background:var(--status-bg);border-radius:8px;font-size:.8rem;color:var(--text-secondary);border:1px solid var(--border-color)}
.trend-icon{font-size:.9rem}
.card-trend.up{color:#10b981;background:rgba(16,185,129,.1);border-color:#10b981}
.card-trend.down{color:#ef4444;background:rgba(239,68,68,.1);border-color:#ef4444}
.card-trend.stable{color:#6b7280;background:var(--status-bg)}

.card-info{display:flex;align-items:center;gap:8px;margin-top:10px;font-size:.8rem;color:var(--text-secondary);opacity:.8}

.card-status{font-size:.85rem;color:var(--text-secondary);padding:8px 12px;background:var(--status-bg);border-radius:8px;text-align:center;transition:.3s;font-weight:500;border:1px solid var(--border-color)}
.card-status.good{background:#dcfce7;color:#166534;border-color:#10b981}
.card-status.warning{background:#fef3c7;color:#92400e;border-color:#f59e0b}
.card-status.danger{background:#fee2e2;color:#991b1b;border-color:#ef4444}
[data-theme="dark"] .card-status.good,.dark-mode .card-status.good{background:rgba(16,185,129,.2);color:#6ee7b7;border-color:#10b981}
[data-theme="dark"] .card-status.warning,.dark-mode .card-status.warning{background:rgba(245,158,11,.2);color:#fbbf24;border-color:#f59e0b}
[data-theme="dark"] .card-status.danger,.dark-mode .card-status.danger{background:rgba(239,68,68,.2);color:#fca5a5;border-color:#ef4444}

/* ====== STATS ====== */
.stats-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px;margin-bottom:30px}
.stats-card,.environment-card{
  background:var(--card-bg);backdrop-filter:blur(10px);border-radius:16px;padding:22px;
  box-shadow:0 8px 32px var(--shadow);transition:.3s;border:1px solid var(--border-color)
}
.stats-card:hover,.environment-card:hover{transform:translateY(-3px);box-shadow:0 12px 40px var(--shadow-hover)}
.stats-card h3,.environment-card h3{margin-bottom:25px;color:var(--text-accent);font-size:1.2rem;display:flex;align-items:center;gap:10px;font-weight:600}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px}
.stat-item{text-align:center;padding:20px;background:var(--status-bg);border-radius:12px;border:1px solid var(--border-color);transition:.3s}
.stat-item:hover{transform:translateY(-2px);box-shadow:0 5px 15px var(--shadow)}
.stat-label{font-size:.9rem;color:var(--text-secondary);margin-bottom:8px;font-weight:500}
.stat-value{font-size:1.8rem;font-weight:700;color:var(--text-primary);font-family:"Segoe UI",monospace}

/* ====== ENV INDICATORS ====== */
.environment-indicators{display:flex;flex-direction:column;gap:15px}
.env-indicator{display:flex;align-items:center;gap:12px;padding:15px 20px;background:var(--status-bg);border-radius:12px;border:1px solid var(--border-color);transition:.3s;font-weight:500}
.env-indicator:hover{transform:translateX(5px);box-shadow:0 3px 10px var(--shadow)}
.env-indicator i{font-size:1.2rem;width:20px;text-align:center}
.env-indicator.optimal{color:#10b981;background:rgba(16,185,129,.1);border-color:#10b981}
.env-indicator.warning{color:#f59e0b;background:rgba(245,158,11,.1);border-color:#f59e0b}
.env-indicator.danger{color:#ef4444;background:rgba(239,68,68,.1);border-color:#ef4444}

/* ====== ALERTS ====== */
.alerts-section h3{margin-bottom:14px}
#alertsContainer{display:grid;gap:10px}
.no-alerts{text-align:center;color:var(--text-secondary);font-style:italic;padding:20px;display:flex;align-items:center;justify-content:center;gap:10px}
.alert{padding:10px 12px;border-radius:10px;border:1px solid var(--border-color);background:var(--status-bg)}
.alert.danger{border-color:#ef4444}
.alert.warning{border-color:#f59e0b}

/* ====== RESPONSIVE ====== */
@media (max-width:768px){
  .container{padding:15px}
  .header{flex-direction:column;gap:12px;text-align:center}
  .header-left h1{font-size:1.6rem}
  .cards-grid,.cards-grid.enhanced{grid-template-columns:1fr;gap:15px}
  .stats-section{grid-template-columns:1fr;gap:20px}
  .stat-item{padding:15px}
  .stat-value{font-size:1.5rem}
  .environment-indicators{gap:12px}
  .env-indicator{padding:12px 15px}
}
@media (max-width:480px){
  .card-value{font-size:2rem}
  .stats-grid{grid-template-columns:1fr}
}
